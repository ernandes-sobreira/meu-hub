<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Meu Mundo ‚Äî Ernandes Sobreira</title>
  <meta name="theme-color" content="#ffffff" />

  <style>
    :root{
      --bg: #ffffff;
      --txt: #0b1020;
      --muted: #5b647a;
      --line: #e9ecf4;

      /* cores vivas (antagonistas) */
      --c1: #ff2d55;  /* rosa forte */
      --c2: #00c2ff;  /* ciano */
      --c3: #00d084;  /* verde */
      --c4: #ffb000;  /* amarelo/laranja */
      --c5: #7c3aed;  /* roxo */
      --c6: #111827;  /* quase preto */

      --shadow: 0 14px 40px rgba(15, 23, 42, .10);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--txt);
      background:
        radial-gradient(700px 280px at 10% 0%, rgba(0,194,255,.18), transparent 60%),
        radial-gradient(700px 280px at 90% 0%, rgba(255,45,85,.14), transparent 55%),
        radial-gradient(900px 380px at 50% 110%, rgba(124,58,237,.12), transparent 60%),
        var(--bg);
    }

    a{color:inherit; text-decoration:none}
    .wrap{max-width: 1150px; margin: 0 auto; padding: 22px 16px 70px;}

    header{
      display:flex;
      align-items:stretch;
      justify-content:space-between;
      gap:16px;
      flex-wrap:wrap;
    }

    .hero{
      flex: 1 1 640px;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: #fff;
      box-shadow: var(--shadow);
      padding: 18px;
      position: relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset: -120px -120px auto auto;
      width: 280px; height: 280px;
      background:
        conic-gradient(from 180deg,
          rgba(255,45,85,.35),
          rgba(0,194,255,.35),
          rgba(0,208,132,.35),
          rgba(255,176,0,.35),
          rgba(124,58,237,.35),
          rgba(255,45,85,.35)
        );
      border-radius: 999px;
      filter: blur(20px);
      opacity: .9;
    }

    .topRow{
      display:flex;
      gap:14px;
      align-items:center;
      flex-wrap:wrap;
      position:relative;
      z-index:1;
    }

    .avatar{
      width: 86px;
      height: 86px;
      border-radius: 22px;
      border: 1px solid var(--line);
      background: linear-gradient(135deg, rgba(0,194,255,.18), rgba(255,45,85,.14));
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .avatar img{width:100%; height:100%; object-fit:cover; display:block;}
    .avatar .ph{
      font-weight: 900;
      letter-spacing:.5px;
      font-size: 22px;
      color: var(--c6);
      opacity:.9;
      user-select:none;
    }

    .who{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width: 260px;
    }
    .who h1{margin:0; font-size: 22px; line-height:1.15;}
    .who p{margin:0; color: var(--muted); font-size: 13.5px; line-height:1.5;}

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top: 10px;
      position:relative;
      z-index:1;
    }
    .chip{
      border: 1px solid var(--line);
      background: #fff;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12.5px;
      font-weight: 800;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .dot{
      width:10px; height:10px;
      border-radius: 999px;
      display:inline-block;
    }

    .panel{
      flex: 0 0 360px;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background:#fff;
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .panel h2{
      margin:0 0 10px;
      font-size: 13px;
      letter-spacing:.2px;
      color: var(--muted);
      text-transform: uppercase;
    }

    .searchRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content: space-between;
    }

    .search{
      flex:1 1 260px;
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 10px 12px;
      display:flex;
      gap:10px;
      align-items:center;
      background: #fff;
    }
    .search input{
      border:0; outline:none;
      width:100%;
      font-size: 14px;
    }
    .pillBtn{
      border: 1px solid var(--line);
      background: #fff;
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .2s ease;
      box-shadow: 0 8px 18px rgba(15,23,42,.06);
      user-select:none;
      white-space:nowrap;
    }
    .pillBtn:active{ transform: scale(.99); }

    main{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 280px 1fr;
      gap:16px;
      align-items:start;
    }
    @media (max-width: 980px){
      main{ grid-template-columns: 1fr; }
      .panel{ flex: 1 1 100%; }
    }

    .sidebar{
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background:#fff;
      box-shadow: var(--shadow);
      padding: 12px;
      position: sticky;
      top: 14px;
    }
    @media (max-width: 980px){
      .sidebar{ position: relative; top:auto; }
    }

    .cats{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .cat{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background:#fff;
      cursor:pointer;
      user-select:none;
      transition: background .2s ease, transform .08s ease;
    }
    .cat:hover{ background: #f7f8fd; }
    .cat:active{ transform: scale(.995); }
    .cat.active{
      border-color: rgba(17,24,39,.18);
      background: linear-gradient(180deg, rgba(0,194,255,.10), rgba(255,45,85,.06));
    }
    .badge{
      font-weight: 900;
      font-size: 12px;
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--muted);
      white-space:nowrap;
    }

    .contentHead{
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .contentHead h2{ margin:0; font-size: 18px; }
    .contentHead p{ margin:0; color: var(--muted); font-size: 13px; line-height:1.45; max-width: 780px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
    }
    @media (max-width: 860px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background:#fff;
      box-shadow: 0 10px 26px rgba(15,23,42,.06);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:0 auto 0 0;
      width: 8px;
      background: var(--c2);
    }
    .card[data-accent="c1"]::before{background: var(--c1);}
    .card[data-accent="c2"]::before{background: var(--c2);}
    .card[data-accent="c3"]::before{background: var(--c3);}
    .card[data-accent="c4"]::before{background: var(--c4);}
    .card[data-accent="c5"]::before{background: var(--c5);}

    .cardTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .kicker{
      font-weight: 900;
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing:.3px;
    }
    .titleApp{
      margin: 2px 0 0;
      font-size: 15px;
      font-weight: 950;
      line-height:1.2;
    }
    .descApp{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height:1.45;
      min-height: 36px;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 4px;
    }
    .go{
      flex: 1 1 160px;
      border: 0;
      border-radius: 14px;
      padding: 11px 12px;
      font-weight: 950;
      cursor:pointer;
      color:#fff;
      background: linear-gradient(90deg, var(--c2), var(--c5));
      box-shadow: 0 12px 22px rgba(124,58,237,.18);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      user-select:none;
    }
    .go:active{ transform: scale(.99); }

    .copy{
      border: 1px solid var(--line);
      background:#fff;
      border-radius: 14px;
      padding: 11px 12px;
      font-weight: 900;
      cursor:pointer;
      user-select:none;
    }

    .empty{
      border: 1px dashed #cfd6ea;
      border-radius: var(--radius);
      padding: 16px;
      background:#fff;
      color: var(--muted);
    }

    .note{
      margin-top: 10px;
      color: var(--muted);
      font-size: 12.5px;
      line-height:1.5;
    }

    .toast{
      position: fixed;
      right: 14px;
      bottom: 14px;
      background: #111827;
      color: #fff;
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: 0 18px 40px rgba(0,0,0,.22);
      display:none;
      z-index: 999;
      font-weight: 800;
      font-size: 13px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <section class="hero">
        <div class="topRow">
          <div class="avatar" id="avatar">
            <!-- opcional: coloque uma foto em assets/profile.jpg e o script tenta carregar -->
            <span class="ph" id="ph">ES</span>
          </div>

          <div class="who">
            <h1 id="name">Ernandes Sobreira</h1>
            <p id="bio">
              Cacerense ‚Ä¢ Bi√≥logo ‚Ä¢ Pai do Davi e da Sara ‚Ä¢ Marido da B√°rbara<br/>
              Mestre em Ecologia e Conserva√ß√£o da Biodiversidade ‚Ä¢ Doutor em Ci√™ncia (Radboud University)<br/>
              Professor visitante da Universidade do Estado de Mato Grosso (UNEMAT)
            </p>
            <div class="chips" id="chips"></div>
          </div>
        </div>

        <div class="note">
          <b>Hub fixo (p√∫blico):</b> esta p√°gina √© somente para acesso aos apps. Para alterar links/categorias,
          edite o arquivo <code>data/links.json</code> no GitHub.
        </div>
      </section>

      <aside class="panel">
        <h2>Buscar e filtrar</h2>
        <div class="searchRow">
          <div class="search">
            <span style="font-weight:900;color:var(--muted)">üîé</span>
            <input id="q" placeholder="Digite: dengue, carbono, cota, exame, quiz..." />
          </div>

          <button class="pillBtn" id="btnAll">Tudo</button>
          <button class="pillBtn" id="btnOpenCat">Abrir categoria</button>
        </div>

        <div class="note" id="count">Carregando‚Ä¶</div>
      </aside>
    </header>

    <main>
      <aside class="sidebar">
        <div class="cats" id="cats"></div>
      </aside>

      <section>
        <div class="contentHead">
          <div>
            <h2 id="secTitle">Tudo</h2>
            <p id="secDesc">Apps e plataformas organizados por categoria.</p>
          </div>
        </div>

        <div class="grid" id="grid"></div>
        <div class="empty" id="empty" style="display:none;">Nada encontrado. Tente outra busca ou escolha ‚ÄúTudo‚Äù.</div>
      </section>
    </main>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const $ = (id)=>document.getElementById(id);

    const ACCENTS = ["c1","c2","c3","c4","c5"];
    const DOTS = ["var(--c1)","var(--c2)","var(--c3)","var(--c4)","var(--c5)","var(--c2)"];

    function toast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.style.display = "block";
      clearTimeout(toast._tm);
      toast._tm = setTimeout(()=> t.style.display = "none", 1800);
    }

    function normUrl(u){
      return String(u||"").trim()
        .replace(/\s+/g,"")
        .replace(/#.*$/,"")
        .replace(/\/+$/,"/");
    }

    function initials(name){
      const parts = String(name||"").trim().split(/\s+/).filter(Boolean);
      const a = parts[0]?.[0] || "E";
      const b = parts[1]?.[0] || (parts[0]?.[1] || "S");
      return (a+b).toUpperCase();
    }

    let DATA = null;
    let activeCat = "all";

    function uniqueLinks(list){
      const seen = new Set();
      const out = [];
      for(const l of (list||[])){
        const key = normUrl(l.url).toLowerCase();
        if(!key) continue;
        if(seen.has(key)) continue;
        seen.add(key);
        out.push(l);
      }
      return out;
    }

    function getCategories(){
      // "all" virtual
      const cats = DATA.categories || [];
      return [{ id:"all", name:"Tudo", desc:"Vis√£o geral de todos os links." }, ...cats];
    }

    function filteredLinks(){
      const q = ($("q").value||"").trim().toLowerCase();

      let list = uniqueLinks(DATA.links || []);

      if(activeCat !== "all"){
        list = list.filter(l => (l.catId||"") === activeCat);
      }

      if(q){
        list = list.filter(l=>{
          const t=(l.title||"").toLowerCase();
          const d=(l.desc||"").toLowerCase();
          const u=(l.url||"").toLowerCase();
          return t.includes(q) || d.includes(q) || u.includes(q);
        });
      }

      // ordena por t√≠tulo
      list.sort((a,b)=> (a.title||"").localeCompare((b.title||""), "pt-BR"));
      return list;
    }

    function countByCat(){
      const map = {};
      const cats = getCategories();
      cats.forEach(c=> map[c.id]=0);

      const list = uniqueLinks(DATA.links || []);
      list.forEach(l=>{
        const cid = l.catId || "all";
        map[cid] = (map[cid]||0)+1;
        map["all"] = (map["all"]||0)+1;
      });
      return map;
    }

    function renderProfile(){
      $("name").textContent = DATA.profile?.name || "Meu Mundo";
      $("bio").innerHTML = (DATA.profile?.bio || "").replaceAll("\n","<br/>");

      $("ph").textContent = initials(DATA.profile?.name || "Ernandes Sobreira");

      const chips = $("chips");
      chips.innerHTML = "";
      const arr = DATA.profile?.chips || [];
      arr.forEach((txt, i)=>{
        const chip = document.createElement("span");
        chip.className = "chip";
        const dot = document.createElement("span");
        dot.className = "dot";
        dot.style.background = DOTS[i % DOTS.length];
        const t = document.createElement("span");
        t.textContent = txt;
        chip.appendChild(dot);
        chip.appendChild(t);
        chips.appendChild(chip);
      });

      // tenta carregar foto fixa (opcional)
      const imgPath = DATA.profile?.photo || "assets/profile.jpg";
      const av = $("avatar");
      const img = new Image();
      img.onload = ()=>{
        av.innerHTML = "";
        img.style.width="100%";
        img.style.height="100%";
        img.style.objectFit="cover";
        av.appendChild(img);
      };
      img.onerror = ()=>{ /* sem foto, fica iniciais */ };
      img.src = imgPath;
      img.alt = "Foto de perfil";
    }

    function renderCats(){
      const catsBox = $("cats");
      catsBox.innerHTML = "";
      const cats = getCategories();
      const counts = countByCat();

      cats.forEach((c)=>{
        const el = document.createElement("div");
        el.className = "cat" + (activeCat===c.id ? " active" : "");
        el.addEventListener("click", ()=>{
          activeCat = c.id;
          renderAll();
        });

        const left = document.createElement("div");
        left.style.display="flex";
        left.style.flexDirection="column";
        left.style.gap="2px";

        const name = document.createElement("div");
        name.style.fontWeight = "950";
        name.textContent = c.name;

        const desc = document.createElement("div");
        desc.style.fontSize = "12px";
        desc.style.color = "var(--muted)";
        desc.textContent = c.desc || "";

        left.appendChild(name);
        if(c.id!=="all" && desc.textContent) left.appendChild(desc);

        const badge = document.createElement("div");
        badge.className = "badge";
        badge.textContent = String(counts[c.id] || 0);

        el.appendChild(left);
        el.appendChild(badge);

        catsBox.appendChild(el);
      });
    }

    function renderGrid(){
      const grid = $("grid");
      grid.innerHTML = "";

      const cats = getCategories();
      const catObj = cats.find(c=>c.id===activeCat) || cats[0];

      $("secTitle").textContent = catObj.name || "Tudo";
      $("secDesc").textContent = catObj.desc || "Apps e plataformas.";

      const list = filteredLinks();
      $("count").textContent = `${list.length} link(s) nesta vis√£o`;

      $("empty").style.display = (list.length===0) ? "block" : "none";

      list.forEach((l, idx)=>{
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.accent = ACCENTS[idx % ACCENTS.length];

        const top = document.createElement("div");
        top.className = "cardTop";

        const left = document.createElement("div");
        left.style.flex="1";

        const catName = (DATA.categories||[]).find(x=>x.id===l.catId)?.name || "Categoria";
        const kicker = document.createElement("div");
        kicker.className = "kicker";
        kicker.textContent = catName;

        const title = document.createElement("div");
        title.className = "titleApp";
        title.textContent = l.title || "(Sem t√≠tulo)";

        const desc = document.createElement("p");
        desc.className = "descApp";
        desc.textContent = l.desc || "Sem descri√ß√£o.";

        left.appendChild(kicker);
        left.appendChild(title);
        left.appendChild(desc);

        top.appendChild(left);

        const actions = document.createElement("div");
        actions.className = "actions";

        const go = document.createElement("button");
        go.className = "go";
        go.innerHTML = "Abrir <span style='opacity:.85'>‚Üó</span>";
        go.addEventListener("click", ()=>{
          const u = String(l.url||"").trim();
          if(!u) return;
          window.open(u, "_blank", "noopener,noreferrer");
        });

        const copy = document.createElement("button");
        copy.className = "copy";
        copy.textContent = "Copiar link";
        copy.addEventListener("click", async ()=>{
          try{
            await navigator.clipboard.writeText(l.url);
            toast("Link copiado!");
          }catch{
            toast("N√£o consegui copiar (permiss√£o do navegador).");
          }
        });

        actions.appendChild(go);
        actions.appendChild(copy);

        card.appendChild(top);
        card.appendChild(actions);

        grid.appendChild(card);
      });
    }

    function openAllInView(){
      const list = filteredLinks();
      if(list.length===0) return toast("Nada pra abrir.");
      if(list.length>12){
        const ok = confirm(`Abrir ${list.length} links? Pode bloquear pop-ups.`);
        if(!ok) return;
      }
      list.forEach(l=>{
        if(l.url) window.open(l.url, "_blank", "noopener,noreferrer");
      });
    }

    function renderAll(){
      renderCats();
      renderGrid();
    }

    async function init(){
      // carrega JSON fixo do GitHub
      const res = await fetch("data/links.json", { cache: "no-store" });
      DATA = await res.json();

      // saneia duplicados
      DATA.links = uniqueLinks(DATA.links || []);

      renderProfile();
      renderAll();

      $("q").addEventListener("input", ()=> renderGrid());
      $("btnAll").addEventListener("click", ()=>{
        activeCat = "all";
        renderAll();
      });
      $("btnOpenCat").addEventListener("click", openAllInView);
    }

    init().catch(err=>{
      console.error(err);
      $("count").textContent = "Erro ao carregar data/links.json. Confira se o arquivo existe no reposit√≥rio.";
    });
  </script>
</body>
</html>
